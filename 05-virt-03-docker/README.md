# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1

Сценарий выполнения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

**Ответ**

https://hub.docker.com/r/rkhozyainov/simple_nginx

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение;

  **Ответ** Виртуальная машина в кластере, для обеспечения доступности,выделения ресурсов и монолитности приложения

- Nodejs веб-приложение;

  **Ответ** Docker так как веб-приложения

- Мобильное приложение c версиями для Android и iOS;

  **Ответ** Виртуальная машина так как необходима графика

- Шина данных на базе Apache Kafka;

  **Ответ**  Виртуальная машина как так критичны данные 

- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;

  **Ответ**  Docker, так все эти сервисы работают в контейнерах

- Мониторинг-стек на базе Prometheus и Grafana;

  **Ответ**  Docker, так все эти сервисы работают в контейнерах

- MongoDB, как основное хранилище данных для java-приложения;

  **Ответ** Виртуальная машина так как присутствует база данных, которая насколько мне известно плохо кластиризуется 

- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

  **Ответ** Виртуальная машина

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;

- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;

- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;

- Добавьте еще один файл в папку ```/data``` на хостовой машине;

- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

  **Ответ**

  ```bash
  rkhozyainov@rkh:~/docker/virt53/task3$ docker run -d -it --rm -v /home/rkhozyainov/docker/virt53/task3/data/:/data --name centos_test centos:8 
  7ab6bf7b2e76a9559f0a3d2d3a84f422fb47eeb37f4c973c34b0192b80a22517
  rkhozyainov@rkh:~/docker/virt53/task3$ docker run -d -it --rm -v /home/rkhozyainov/docker/virt53/task3/data/:/data --name debian_test debian:buster-slim 
  a0b854941307275ab6acd77bc5bc2b71333d95f8f58dff82557c2eab35d08e2d
  rkhozyainov@rkh:~/docker/virt53/task3$ docker exec centos_test touch /data/testfile
  rkhozyainov@rkh:~/docker/virt53/task3$ touch ./data/testfile2
  rkhozyainov@rkh:~/docker/virt53/task3$ docker exec -it debian_test /bin/bash
  root@a0b854941307:/# ls /
  .dockerenv  boot/       dev/        home/       lib64/      mnt/        proc/       run/        srv/        tmp/        var/        
  bin/        data/       etc/        lib/        media/      opt/        root/       sbin/       sys/        usr/        
  root@a0b854941307:/# ls -l /data/
  total 0
  -rw-r--r-- 1 root root 0 Nov  7 12:30 testfile
  -rw-rw-r-- 1 1000 1000 0 Nov  7 12:31 testfile2



## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

**Ответ**

https://hub.docker.com/r/rkhozyainov/ansible

